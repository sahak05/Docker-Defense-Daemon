import{c as L,r as o,j as e,g as v,C as U,b as p,u as $,L as M,t as b}from"./index-DHtPeL_b.js";import{C as j,a as g,B as C}from"./button-CjhLNr1v.js";import{a as q,r as H,s as G,b as O}from"./dashboard-CTd77nbb.js";import{I as V}from"./index-D5fRsFHl.js";import{S as X,a as J,b as K,c as Q,d as W,e as w,T as Y,f as Z,g as k,h as f,i as ee,j as h}from"./table-Da8j9RYo.js";import{D as se,E as te}from"./eye-D9frdCNw.js";import{B as T}from"./badge-HVe6nmkD.js";import{P as S}from"./progress-CyXfUX3y.js";import{D as ae,a as re,b as le,c as ne,d as ie}from"./dialog-quAqh7LN.js";import{C as ce}from"./circle-x-DfhPwigA.js";import"./index-Dv7bi_y4.js";import"./Combination-Cw94Wu9k.js";import"./check-W4AsGZoT.js";const de=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],D=L("play",de);const oe=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],R=L("rotate-cw",oe);const me=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],E=L("square",me),xe=a=>{const[r,t]=o.useState([]),[n,l]=o.useState(!0),[s,i]=o.useState(null),d=o.useRef(!0),c=o.useRef(!1),m=o.useCallback(async()=>{if(!c.current){c.current=!0;try{const x=await q();d.current&&(t(Array.isArray(x)?x:[]),i(null))}catch(x){d.current&&(i(x instanceof Error?x.message:"Failed to fetch containers"),t([]))}finally{d.current&&(l(!1),c.current=!1)}}},[]);return o.useEffect(()=>(d.current=!0,m(),()=>{d.current=!1}),[a,m]),{containers:r,loading:n,error:s,refetch:m}},ue=({containers:a})=>{const r=a.filter(l=>l.status==="running").length,t=a.filter(l=>l.status==="exited"||l.status==="created"||l.status==="dead").length,n=a.filter(l=>l.status==="paused").length;return e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(j,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Running"}),e.jsx("p",{className:"text-foreground",children:r})]}),e.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center",style:{backgroundColor:v("success",50)},children:e.jsx(D,{className:"h-5 w-5",style:{color:v("success",600)}})})]})})}),e.jsx(j,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Stopped"}),e.jsx("p",{className:"text-foreground",children:t})]}),e.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center",style:{backgroundColor:v("neutral",50)},children:e.jsx(E,{className:"h-5 w-5",style:{color:v("neutral",600)}})})]})})}),e.jsx(j,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Paused"}),e.jsx("p",{className:"text-foreground",children:n})]}),e.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center",style:{backgroundColor:v("warning",50)},children:e.jsx(R,{className:"h-5 w-5",style:{color:v("warning",600)}})})]})})})]})},he=({searchTerm:a,onSearchChange:r,statusFilter:t,onStatusFilterChange:n})=>e.jsx(j,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(V,{placeholder:"Search containers by name, image, or ID...",value:a,onChange:l=>r(l.target.value),className:"pl-9"})]}),e.jsxs(J,{value:t,onValueChange:n,children:[e.jsx(K,{className:"w-full sm:w-40",children:e.jsx(Q,{placeholder:"Status"})}),e.jsxs(W,{children:[e.jsx(w,{value:"all",children:"All Status"}),e.jsx(w,{value:"running",children:"Running"}),e.jsx(w,{value:"exited",children:"Exited"}),e.jsx(w,{value:"paused",children:"Paused"})]})]}),e.jsx(C,{variant:"outline",size:"icon",children:e.jsx(se,{className:"h-4 w-4"})})]})})});function F(a,r="light"){return{running:{light:"#22c55e",dark:"#22c55e"},stopped:{light:"#ef4444",dark:"#ef4444"},paused:{light:"#f59e0b",dark:"#f59e0b"},critical:{light:"#dc2626",dark:"#dc2626"},high:{light:"#f59e0b",dark:"#f59e0b"},medium:{light:"#3b82f6",dark:"#3b82f6"},low:{light:"#737373",dark:"#a3a3a3"},info:{light:"#0ea5e9",dark:"#0ea5e9"},success:{light:"#22c55e",dark:"#22c55e"},warning:{light:"#f59e0b",dark:"#f59e0b"},error:{light:"#ef4444",dark:"#ef4444"}}[a.toLowerCase()]?.[r]||"#737373"}const je=({containers:a,isDarkMode:r,onSelectContainer:t})=>{const n=s=>{const i=F(s,r?"dark":"light"),d=r?p.text.dark.primary:p.text.light.primary,c=r?p.border.dark:p.border.light;return{backgroundColor:i,color:d,borderColor:c,padding:"0.15rem 0.5rem"}},l=s=>{const i=F(s,r?"dark":"light");return e.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:i}})};return e.jsx(j,{children:e.jsx(g,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(k,{children:[e.jsx(f,{children:"Container"}),e.jsx(f,{children:"Image"}),e.jsx(f,{children:"Status"}),e.jsx(f,{children:"Uptime"}),e.jsx(f,{children:"CPU"}),e.jsx(f,{children:"Memory"}),e.jsx(f,{children:"Last Event"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(ee,{children:a.length===0?e.jsx(k,{children:e.jsx(h,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(U,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No containers found"})]})})}):a.map(s=>e.jsxs(k,{className:"hover:bg-muted/50",children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[l(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]})]})}),e.jsx(h,{className:"text-muted-foreground",children:s.image}),e.jsx(h,{children:e.jsx(T,{variant:"outline",style:n(s.status),children:s.status})}),e.jsx(h,{className:"text-muted-foreground",children:s.uptime}),e.jsx(h,{children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex items-center justify-between text-sm mb-1",children:e.jsxs("span",{className:"text-foreground",children:[s.cpu.toFixed(1),"%"]})}),e.jsx(S,{value:s.cpu,className:"h-1.5"})]})}),e.jsx(h,{children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex items-center justify-between text-sm mb-1",children:e.jsxs("span",{className:"text-foreground",children:[s.memory.toFixed(1)," GB"]})}),e.jsx(S,{value:s.memory/s.memory_limit*100,className:"h-1.5"})]})}),e.jsx(h,{className:"text-muted-foreground",children:s.last_event}),e.jsx(h,{className:"text-right",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>t(s),children:e.jsx(te,{className:"h-4 w-4"})})})]},s.id))})]})})})})},ge=({isOpen:a,onClose:r,container:t,isDarkMode:n,onStop:l,onStart:s,onRestart:i,isLoading:d=!1})=>{const c=m=>{const x=F(m,n?"dark":"light"),y=n?p.text.dark.primary:p.text.light.primary,N=n?p.border.dark:p.border.light;return{backgroundColor:x,color:y,borderColor:N,padding:"0.15rem 0.5rem"}};return t?e.jsx(ae,{open:a,onOpenChange:r,children:e.jsxs(re,{className:"max-w-2xl",children:[e.jsxs(le,{children:[e.jsx(ne,{children:"Container Details"}),e.jsxs(ie,{children:[t.name," (",t.id,")"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Image"}),e.jsx("p",{className:"text-foreground",children:t.image})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Status"}),e.jsx(T,{variant:"outline",style:c(t.status),children:t.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Uptime"}),e.jsx("p",{className:"text-foreground",children:t.uptime})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Created"}),e.jsx("p",{className:"text-foreground",children:new Date(t.created).toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"CPU Usage"}),e.jsxs("span",{className:"text-foreground",children:[t.cpu.toFixed(1),"%"]})]}),e.jsx(S,{value:t.cpu})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Memory Usage"}),e.jsxs("span",{className:"text-foreground",children:[t.memory.toFixed(1)," /"," ",t.memory_limit.toFixed(1)," GB"]})]}),e.jsx(S,{value:t.memory/t.memory_limit*100})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Last Event"}),e.jsx("p",{className:"text-foreground",children:t.last_event})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(C,{variant:"outline",size:"sm",disabled:t.status!=="running"||d,onClick:l,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Stop"]}),e.jsxs(C,{variant:"outline",size:"sm",disabled:t.status==="running"||d,onClick:s,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Start"]}),e.jsxs(C,{variant:"outline",size:"sm",disabled:d,onClick:i,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Restart"]})]})]})]})}):null},fe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[1,2,3].map(a=>e.jsx(j,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-24 bg-muted rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 w-12 bg-muted rounded animate-pulse"})]}),e.jsx("div",{className:"h-10 w-10 bg-muted rounded-lg animate-pulse"})]})})},a))}),e.jsx(j,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})}),e.jsx("div",{className:"h-10 w-10 bg-muted rounded animate-pulse"})]})})}),e.jsx(j,{children:e.jsx(g,{className:"p-0",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"grid grid-cols-6 gap-4 pb-3 border-b",children:[1,2,3,4,5,6].map(a=>e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"},a))}),[1,2,3,4,5].map(a=>e.jsx("div",{className:"grid grid-cols-6 gap-4",children:[1,2,3,4,5,6].map(r=>e.jsx("div",{className:"h-8 bg-muted rounded animate-pulse"},r))},a))]})})})]}),Re=()=>{const{isDarkMode:a}=$(),[r,t]=o.useState(""),[n,l]=o.useState("all"),[s,i]=o.useState(null),[d,c]=o.useState(!1),{containers:m,loading:x,error:y,refetch:N}=xe(),_=async()=>{if(s){c(!0);try{await O(s.id),b.success(`Container ${s.name} stopped successfully`),i(null),N()}catch(u){console.error("Failed to stop container:",u),b.error("Failed to stop container")}finally{c(!1)}}},B=async()=>{if(s){c(!0);try{await G(s.id),b.success(`Container ${s.name} started successfully`),i(null),N()}catch(u){console.error("Failed to start container:",u),b.error("Failed to start container")}finally{c(!1)}}},I=async()=>{if(s){c(!0);try{await H(s.id),b.success(`Container ${s.name} restarted successfully`),i(null),N()}catch(u){console.error("Failed to restart container:",u),b.error("Failed to restart container")}finally{c(!1)}}},P=o.useMemo(()=>m.filter(u=>{const z=u.name.toLowerCase().includes(r.toLowerCase())||u.image.toLowerCase().includes(r.toLowerCase())||u.id.toLowerCase().includes(r.toLowerCase()),A=n==="all"||u.status===n;return z&&A}),[m,r,n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-foreground mb-1",children:"Containers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor Docker containers"})]}),x&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(M,{className:"h-4 w-4 animate-spin"}),"Loading..."]})]}),y&&e.jsx(j,{className:"border-error",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ce,{className:"h-5 w-5 text-text-error shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text-error",children:"Error loading containers"}),e.jsx("p",{className:"text-sm text-text-error",children:y}),e.jsx(C,{size:"sm",variant:"outline",onClick:()=>N(),className:"mt-2",children:"Try Again"})]})]})})}),x&&m.length===0?e.jsx(fe,{}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{containers:m}),e.jsx(he,{searchTerm:r,onSearchChange:t,statusFilter:n,onStatusFilterChange:l}),e.jsx(je,{containers:P,isDarkMode:a,onSelectContainer:i}),e.jsx(ge,{isOpen:!!s,onClose:()=>i(null),container:s,isDarkMode:a,onStop:_,onStart:B,onRestart:I,isLoading:d})]})]})};export{Re as ContainersPage};
